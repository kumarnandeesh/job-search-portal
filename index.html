<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - JobPortal</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="navbar">
        <a href="welcome.html" class="logo">JobPortal</a>
        <div class="nav-links">
            <a href="welcome.html">Home</a>
            <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
                <span class="theme-icon">ðŸŒ™</span>
            </button>
        </div>
    </nav>

    <div class="auth-container">
        <div class="auth-card">
            <h1>Welcome Back</h1>
            <p class="subtitle">Sign in to continue your job search</p>
            
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('login')">Login</button>
                <button class="tab-btn" onclick="switchTab('signup')">Sign Up</button>
            </div>
            
            <!-- Login Form -->
            <div id="loginForm" class="form-container active">
                <form onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" required placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" required placeholder="Enter your password">
                    </div>
                    <button type="submit" class="btn btn-primary">Login</button>
                </form>
            </div>
            
            <!-- Signup Form -->
            <div id="signupForm" class="form-container">
                <form onsubmit="handleSignup(event)">
                    <div class="form-group">
                        <label for="signupName">Full Name</label>
                        <input type="text" id="signupName" required placeholder="Enter your full name">
                    </div>
                    <div class="form-group">
                        <label for="signupEmail">Email</label>
                        <input type="email" id="signupEmail" required placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label for="signupPassword">Password</label>
                        <input type="password" id="signupPassword" required placeholder="Create a password">
                    </div>
                    <div class="form-group">
                        <label for="signupEducation">Education</label>
                        <input type="text" id="signupEducation" required placeholder="e.g., B.Tech in Computer Science">
                    </div>
                    <div class="form-group">
                        <label for="signupExperience">Experience</label>
                        <input type="text" id="signupExperience" required placeholder="e.g., 3 years in Web Development">
                    </div>
                    <div class="form-group">
                        <label for="signupSkills">Skills</label>
                        <textarea id="signupSkills" required placeholder="e.g., JavaScript, React, Node.js, Python"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="signupLocation">Location</label>
                        <input type="text" id="signupLocation" required placeholder="e.g., Bangalore, Mumbai">
                    </div>
                    <button type="submit" class="btn btn-primary">Create Account</button>
                </form>
            </div>
        </div>
    </div>
    
    <script src="script/app.js"></script>
    <script>
        initTheme();
        
        // Check if already logged in
        if (isLoggedIn()) {
            window.location.href = 'dashboard.html';
        }
        
        // Check for hash to show signup
        if (window.location.hash === '#signup') {
            switchTab('signup');
        }
        
        // Switch between login and signup tabs
        function switchTab(tab) {
            const loginForm = document.getElementById('loginForm');
            const signupForm = document.getElementById('signupForm');
            const tabs = document.querySelectorAll('.tab-btn');
            
            tabs.forEach(t => t.classList.remove('active'));
            
            if (tab === 'login') {
                loginForm.classList.add('active');
                signupForm.classList.remove('active');
                tabs[0].classList.add('active');
            } else {
                loginForm.classList.remove('active');
                signupForm.classList.add('active');
                tabs[1].classList.add('active');
            }
        }
        
        // Handle login
        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            
            // Check if user exists in localStorage
            const storedUser = localStorage.getItem('registeredUser');
            if (storedUser) {
                const user = JSON.parse(storedUser);
                if (user.email === email) {
                    saveUser(user);
                    window.location.href = 'dashboard.html';
                    return;
                }
            }
            
            alert('User not found. Please sign up first.');
        }
        
        // Handle signup
        function handleSignup(e) {
            e.preventDefault();
            
            const user = {
                name: document.getElementById('signupName').value,
                email: document.getElementById('signupEmail').value,
                password: document.getElementById('signupPassword').value,
                education: document.getElementById('signupEducation').value,
                experience: document.getElementById('signupExperience').value,
                skills: document.getElementById('signupSkills').value,
                location: document.getElementById('signupLocation').value
            };
            
            // Store user for future login
            localStorage.setItem('registeredUser', JSON.stringify(user));
            
            // Save as current user and redirect
            saveUser(user);
            window.location.href = 'dashboard.html';
        }
    </script>
</body>
</html>
